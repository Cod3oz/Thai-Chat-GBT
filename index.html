<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>G-Dawg Translator</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f9fafb; color: #111; }
    .card { background: #fff; padding: 15px; margin: 10px 0; border-radius: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    button { margin-left: 10px; }
  </style>
</head>
<body>
  <h1>G-Dawg Translator</h1>
  <textarea id="inputText" rows="3" cols="60" placeholder="Enter text..."></textarea><br>
  <label>Direction:</label>
  <select id="direction">
    <option value="auto">Auto</option>
    <option value="en-th">English → Thai</option>
    <option value="th-en">Thai → English</option>
  </select>
  <label>Speaker:</label>
  <select id="gender">
    <option value="auto">Auto</option>
    <option value="male">Male</option>
    <option value="female">Female</option>
  </select>
  <button onclick="translate()">Translate</button>

  <div id="results"></div>

  <script>
    async function translate() {
      const text = document.getElementById('inputText').value;
      const direction = document.getElementById('direction').value;
      const gender = document.getElementById('gender').value;
      const res = await fetch('/.netlify/functions/translate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ text, direction, gender })
      });
      const data = await res.json();
      const results = document.getElementById('results');
      results.innerHTML = '';
      Object.entries(data).forEach(([key, val]) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `<b>${key.toUpperCase()}</b>: ${val} 
          <button onclick="copyText('${val}')">Copy</button>
          <button onclick="speakText('${val}')">Speak</button>`;
        results.appendChild(card);
      });
    }
    function copyText(text) {
      navigator.clipboard.writeText(text);
      alert('Copied: ' + text);
    }
    function speakText(text) {
      const msg = new SpeechSynthesisUtterance(text);
      speechSynthesis.speak(msg);
    }
  </script>
</body>
</html>
